<div class="container">
    <div class="button-row">
        <button mat-raised-button class="top-button" (click)="addRow()">Add Row</button>
        <button mat-raised-button class="top-button" (click)="print()">Print</button>
    </div>
    <div class="table-wrapper">
        <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

        <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef>
                No.
            </th>
            <td mat-cell *matCellDef="let element; let i = index"> {{i + 1}} </td>
        </ng-container>

        <ng-container matColumnDef="points">
            <th mat-header-cell *matHeaderCellDef>
                Points
            </th>
            <td mat-cell *matCellDef="let element">
                <input matInput type="number" [(ngModel)]="element.points" (change)="onPointsChange(element)" />
            </td>
        </ng-container>

        <ng-container matColumnDef="nationIconUrl">
            <th mat-header-cell *matHeaderCellDef>
                
            </th>
            <td mat-cell *matCellDef="let element">
                <img *ngIf="element.nationIconUrl" [src]="element.nationIconUrl" width="48" height="48" [style.clip-path]="canvasService.getCoatOfArmsPolygonClipPathString()" (click)="openNationIconPool(element)">
                <button *ngIf="!element.nationIconUrl" mat-icon-button (click)="openNationIconPool(element)">
                    <mat-icon>flag</mat-icon>
                </button>
            </td>
        </ng-container>

        <ng-container matColumnDef="nationName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by nationName">
                Nation
            </th>
            <td mat-cell *matCellDef="let element"> {{element.nationName}} </td>
        </ng-container>

        <ng-container matColumnDef="playerIconUrl">
            <th mat-header-cell *matHeaderCellDef>
                
            </th>
            <td mat-cell *matCellDef="let element">
                <img *ngIf="element.playerIconUrl" class="round" [src]="element.playerIconUrl" width="48" height="48" (click)="openPlayerIconPool(element)">
                <button *ngIf="!element.playerIconUrl" mat-icon-button (click)="openPlayerIconPool(element)">
                    <mat-icon>person</mat-icon>
                </button>
            </td>
        </ng-container>

        <ng-container matColumnDef="playerName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by playerName">
                Player
            </th>
            <td mat-cell *matCellDef="let element"> {{element.playerName}} </td>
        </ng-container>
        
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element; let i = index">
                <button mat-icon-button (click)="removeRow(i)">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </ng-container>
        

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>